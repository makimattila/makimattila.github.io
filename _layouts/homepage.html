<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
<head>
  <title>{{ site.title }} | {{ site.affiliation }}</title>

  <!-- Other meta tags and links -->

  {% if site.font == "Sans Serif" %}
  <link rel="stylesheet" href="{{ '/assets/css/font_sans_serif.css' | relative_url }}">
  {% else %}
  <link rel="stylesheet" href="{{ '/assets/css/font.css' | relative_url }}">
  {% endif %}
  {% if site.auto_dark_mode %}
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/publications.css' | relative_url }}">
  {% else %}
  <link rel="stylesheet" href="{{ '/assets/css/style-no-dark-mode.css' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/publications-no-dark-mode.css' | relative_url }}">
  {% endif %}
  <style>
    /* Style for the research paper titles */
    .paper-title {
      font-size: 1em;
      font-family: inherit;
    }

    /* Style for the toggle button */
    .toggle-abstract {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1em;
      padding: 0;
      margin-left: 10px;
      color: #2c3e50;  /* Adjust this color to match your headings' color */
    }

    /* Hide the abstract by default */
    .hidden {
      display: none;
    }

    /* Style for the abstract text */
    .abstract {
      margin-top: 10px;
      padding: 10px;
      background-color: #f9f9f9;
      border-left: 3px solid #ccc;
    }

    /* Add vertical space between research papers */
    .paper {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <header>
      <!-- Your header content -->
    </header>
    <section>
      {{ content }}
      <br>
      {% if site.enable_footnote %}
      <p><small>Powered by Jekyll and <a href="https://github.com/yaoyao-liu/minimal-light" target="_blank" rel="noopener">Minimal Light</a> theme.</small></p>
      {% endif %}
    </section>
    <footer></footer>
  </div>
  <script src="{{ '/assets/js/scale.fix.js' | relative_url }}"></script>
  {% if site.google_analytics %}
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
      m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', '{{ site.google_analytics }}', 'auto');
    ga('send', 'pageview');
  </script>
  {% endif %}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM fully loaded and parsed'); // Debugging log 1

      const toggleButtons = document.querySelectorAll('.toggle-abstract');
      console.log('Toggle buttons found:', toggleButtons.length); // Debugging log 2

      toggleButtons.forEach(button => {
        button.addEventListener('click', function() {
          console.log('Button clicked:', this); // Debugging log 3

          const abstract = this.nextElementSibling;
          console.log('Next sibling element:', abstract); // Debugging log 4

          if (!abstract) {
            console.error('No sibling element found after the button!');
            return;
          }

          console.log('Sibling element classes:', abstract.classList); // Debugging log 5

          if (!abstract.classList.contains('abstract')) {
            console.error('Sibling element does not have the class "abstract"!');
            return;
          }

          abstract.classList.toggle('hidden');
          console.log('Abstract visibility toggled. Hidden:', abstract.classList.contains('hidden')); // Debugging log 6

          // Change the button text and show/hide abstract text based on the state
          if (abstract.classList.contains('hidden')) {
            this.textContent = '▼ Show abstract';
          } else {
            this.textContent = '▲ Hide abstract';
          }
        });
      });
    });
  </script>
</body>
</html>
